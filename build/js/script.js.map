{"version":3,"file":"script.js","names":["window","addEventListener","document","querySelector","body","classList","add","navLinks","querySelectorAll","mob_navLinks","headerBottom","headerLogo","header__top","burger_logo","applyScrolledClasses","forEach","el","path","removeScrolledClasses","remove","contains","moveThreshold","styleThreshold","scrollY","card","badge","createElement","className","textContent","appendChild","swiperInstance","initBlogSwiper","screenWidth","innerWidth","Swiper","slidesPerView","spaceBetween","slidesOffsetBefore","slidesOffsetAfter","destroy","wrapper","slides","removeAttribute","slide","navItems","submenu","getElementById","submenuContents","logo","item","target","dataset","menu","style","overflow","nav","link","content","toggle","pathEl","parentElement","$","ready","select2","minimumResultsForSearch","width","button","updateWidth","buttonWidth","offsetWidth","select2Container","observer","ResizeObserver","observe","burger","mobileMenu","closeMenu","overlay","openMenu","closeMenuFunc","currentLi","closest","activeMenu","maxHeight","activeToggle","scrollHeight","setTimeout","material","title","arrow","h2","toggleMenu","e","preventDefault","priceBlocks","block","sliderEl","noUiSlider","rangeMin","parseInt","rangeMax","urlParams","URLSearchParams","location","search","minParam","maxParam","startMin","get","startMax","lowerEl","upperEl","create","start","connect","range","min","max","step","currentMin","String","currentMax","on","values","minVal","Math","round","maxVal","filters","itemsBlock","stickyOffset","stopOffset","hysteresis","isStuck","isAtBottom","lastScrollY","currentScrollY","deltaY","abs","containerTop","getBoundingClientRect","top","itemsBottom","bottom","filtersHeight","offsetHeight","position","updateProducts","url","currentGrid","cards","fetch","then","res","text","html","parser","DOMParser","doc","parseFromString","newGrid","innerHTML","newCards","opacity","transform","transition","history","pushState","attachPaginationListeners","a","href","tabs","contents","tab","t","c","cartForms","form","variantSelect","priceEl","optionWrappers","buttons","selectEl","length","btn","value","dispatchEvent","Event","updateVariant","selectedOptions","index","optionIndex","activeBtn","matchedVariant","Array","from","options","find","option","variantOptions","JSON","parse","every","opt","i","price","newUrl","pathname","replaceState","product","qtyControl","qtyValue","qtyInput","minusBtn","plusBtn","current","setupCartQtyButtons","qtyButtons","key","action","qtyEl","currentQty","newQty","formData","FormData","append","method","cart","json","renderCart","productForms","cartSidebar","cartOverlay","cartItems","productForm","items","currency","featured_image","product_title","final_line_price","toFixed","options_with_values","map","name","join","quantity","insertAdjacentHTML","total_price","onclick","clearBtn","cartBtn","cartImg","cartImgMob","cartClose","openCart","closeCartFunc","checkoutContainer","checkoutBtn"],"sources":["script.js"],"sourcesContent":["////////////////////////////scroll////////////////////\r\nwindow.addEventListener( 'DOMContentLoaded', function () {\r\n\t// Якщо на сторінці є секція catalog_main — додаємо клас\r\n\tif (document.querySelector( '.catalog_main, .product_page' )) {\r\n\t\tdocument.body.classList.add( 'white_header' );\r\n\t}\r\n\r\n\tconst navLinks = document.querySelectorAll( '.header_nav .nav__list li > a' );\r\n\tconst mob_navLinks = document.querySelectorAll( '.header_nav .mobile_nav_list > a' );\r\n\tconst headerBottom = document.querySelector( '.header__bottom' );\r\n\tconst headerLogo = document.querySelector( '.header_logo' );\r\n\tconst header__top = document.querySelector( '.header__top' );\r\n\tconst burger_logo = document.querySelectorAll( '.burger-menu .bar' );\r\n\r\n\tconst applyScrolledClasses = () => {\r\n\t\tnavLinks.forEach( el => el.classList.add( 'scrolled' ) );\r\n\t\tmob_navLinks.forEach( el => el.classList.add( 'scrolled' ) );\r\n\t\tburger_logo.forEach( el => el.classList.add( 'scrolled' ) );\r\n\t\theaderLogo?.classList.add( 'scrolled' );\r\n\r\n\t\theaderBottom?.classList.add( 'scrolled' );\r\n\r\n\t\t// Додаємо клас для svg path в активних submenu-toggle\r\n\t\tdocument.querySelectorAll( '.header .header_left .header_nav .nav__list .submenu-toggle svg path' ).forEach( path => {\r\n\t\t\tpath.classList.add( 'active' );\r\n\t\t} );\r\n\t};\r\n\r\n\tconst removeScrolledClasses = () => {\r\n\t\tnavLinks.forEach( el => el.classList.remove( 'scrolled' ) );\r\n\t\tmob_navLinks.forEach( el => el.classList.remove( 'scrolled' ) );\r\n\t\tburger_logo.forEach( el => el.classList.remove( 'scrolled' ) );\r\n\t\theaderLogo?.classList.remove( 'scrolled' );\r\n\r\n\t\theaderBottom?.classList.remove( 'scrolled' );\r\n\r\n\t\t// Знімаємо клас для svg path в активних submenu-toggle\r\n\t\tdocument.querySelectorAll( '.header .header_left .header_nav .nav__list .submenu-toggle svg path' ).forEach( path => {\r\n\t\t\tpath.classList.remove( 'active' );\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tif (document.body.classList.contains( 'white_header' )) {\r\n\t\t// Каталог — одразу білий хедер\r\n\t\theaderBottom?.classList.add( 'scrolled_top' );\r\n\r\n\t\tapplyScrolledClasses();\r\n\t} else {\r\n\t\t// Головна — тільки при скролі\r\n\t\twindow.addEventListener( 'scroll', function () {\r\n\t\t\tconst moveThreshold = 48;\r\n\t\t\tconst styleThreshold = 450;\r\n\r\n\t\t\tif (window.scrollY > moveThreshold) {\r\n\t\t\t\theaderBottom?.classList.add( 'scrolled_top' );\r\n\t\t\t\theader__top?.classList.add( 'slide-up' );\r\n\t\t\t} else {\r\n\t\t\t\theaderBottom?.classList.remove( 'scrolled_top' );\r\n\t\t\t\theader__top?.classList.remove( 'slide-up' );\r\n\t\t\t}\r\n\r\n\t\t\tif (window.scrollY > styleThreshold) {\r\n\t\t\t\tapplyScrolledClasses();\r\n\t\t\t} else {\r\n\t\t\t\tremoveScrolledClasses();\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n} );\r\n\r\n\r\n/////////////////////////badge_items_card/////////////////////////////////\r\ndocument.querySelectorAll( '[data-badge=\"new\"]' ).forEach( card => {\r\n\tconst badge = document.createElement( 'span' );\r\n\tbadge.className = 'product-badge';\r\n\tbadge.textContent = 'New';\r\n\tcard.querySelector( '.card_image' ).appendChild( badge );\r\n} );\r\n\r\n///////////////////////////////swiper///////////////////////////\r\nlet swiperInstance = null;\r\n\r\nfunction initBlogSwiper() {\r\n\tconst screenWidth = window.innerWidth;\r\n\r\n\tif (screenWidth < 1580 && !swiperInstance) {\r\n\t\t// Ініціалізація Swiper\r\n\t\tswiperInstance = new Swiper( '.blog__posts.swiper', {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 10,\r\n\t\t\tslidesOffsetBefore: 15,\r\n\t\t\tslidesOffsetAfter: 15\r\n\t\t} );\r\n\t} else if (screenWidth >= 1580 && swiperInstance) {\r\n\t\t// Видаляємо Swiper\r\n\t\tswiperInstance.destroy( true, true );\r\n\t\tswiperInstance = null;\r\n\r\n\t\t// ✅ Відновлюємо початкові стилі\r\n\t\tconst wrapper = document.querySelector( '.blog__posts .swiper-wrapper' );\r\n\t\tconst slides = document.querySelectorAll( '.blog__posts .swiper-slide' );\r\n\r\n\t\tif (wrapper) {\r\n\t\t\twrapper.removeAttribute( 'style' );\r\n\t\t\twrapper.classList.remove( 'swiper-wrapper' ); // не обов'язково, але можна\r\n\t\t}\r\n\r\n\t\tslides.forEach( slide => {\r\n\t\t\tslide.removeAttribute( 'style' );\r\n\t\t\tslide.classList.remove( 'swiper-slide' ); // не обов'язково, але можна\r\n\t\t} );\r\n\t}\r\n}\r\n\r\nwindow.addEventListener( 'load', initBlogSwiper );\r\nwindow.addEventListener( 'resize', initBlogSwiper );\r\n\r\n\r\n//////////////////////////header_menu//////////////////////////\r\nconst navItems = document.querySelectorAll( '.nav-item' );\r\nconst submenu = document.getElementById( 'submenu' );\r\nconst submenuContents = submenu.querySelectorAll( '.submenu-content' );\r\nconst headerBottom = document.querySelector( '.header__bottom' );\r\nconst logo = document.querySelector( '.header_logo' );\r\nconst navLinks = document.querySelectorAll( '.nav_link' );\r\n\r\nnavItems.forEach( item => {\r\n\titem.addEventListener( 'mouseenter', () => {\r\n\t\tconst target = item.dataset.menu;\r\n\r\n\t\tsubmenu.classList.add( 'visible' );\r\n\t\theaderBottom.classList.add( 'scrolled' );\r\n\t\tlogo.classList.add( 'scrolled' );\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\r\n\t\tnavItems.forEach( nav => nav.classList.add( 'scrolled' ) );\r\n\t\tnavLinks.forEach( link => link.classList.add( 'scrolled' ) );\r\n\r\n\t\tsubmenuContents.forEach( content => {\r\n\t\t\tif (content.dataset.content === target) {\r\n\t\t\t\tcontent.classList.add( 'active' );\r\n\t\t\t} else {\r\n\t\t\t\tcontent.classList.remove( 'active' );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Знімаємо active з усіх .submenu-toggle і path\r\n\t\tdocument.querySelectorAll( '.submenu-toggle' ).forEach( toggle => {\r\n\t\t\ttoggle.classList.remove( 'active' );\r\n\t\t\tconst pathEl = toggle.querySelector( 'svg path' );\r\n\t\t\tif (pathEl) pathEl.classList.remove( 'active' );\r\n\t\t} );\r\n\r\n\t\t// Додаємо active до .submenu-toggle і path у поточному item\r\n\t\tconst toggle = item.parentElement.querySelector( '.submenu-toggle' );\r\n\t\tif (toggle) {\r\n\t\t\ttoggle.classList.add( 'active' );\r\n\t\t\tconst pathEl = toggle.querySelector( 'svg path' );\r\n\t\t\tif (pathEl) pathEl.classList.add( 'active' );\r\n\t\t}\r\n\t} );\r\n} );\r\n\r\ndocument.querySelector( '.header' ).addEventListener( 'mouseleave', () => {\r\n\tsubmenu.classList.remove( 'visible' );\r\n\tdocument.body.style.overflow = '';\r\n\r\n\t// Знімаємо active з усіх .submenu-toggle і path\r\n\tdocument.querySelectorAll( '.submenu-toggle' ).forEach( toggle => {\r\n\t\ttoggle.classList.remove( 'active' );\r\n\t\tconst pathEl = toggle.querySelector( 'svg path' );\r\n\t\tif (pathEl) pathEl.classList.remove( 'active' );\r\n\t} );\r\n\r\n\tif (document.body.classList.contains( 'white_header' )) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst styleThreshold = 450;\r\n\r\n\tif (window.scrollY <= styleThreshold) {\r\n\t\theaderBottom.classList.remove( 'scrolled' );\r\n\t\tlogo.classList.remove( 'scrolled' );\r\n\t\tnavItems.forEach( nav => nav.classList.remove( 'scrolled' ) );\r\n\t\tnavLinks.forEach( link => link.classList.remove( 'scrolled' ) );\r\n\t}\r\n} );\r\n\r\n\r\n///////підключення бібліотеки селект2////////////////\r\n$( document ).ready( function () {\r\n\t$( '.js-select2' ).select2( {\r\n\t\tminimumResultsForSearch: -1,\r\n\t\twidth: 'style' // дозволяє нам керувати шириною через JS\r\n\t} );\r\n\r\n\tconst wrapper = document.querySelector( '.gift_items__select' );\r\n\tconst button = wrapper ? wrapper.querySelector( '.shop-gift' ) : null;\r\n\r\n\tif (wrapper && button) {\r\n\t\tconst updateWidth = () => {\r\n\t\t\tconst buttonWidth = button.offsetWidth;\r\n\t\t\twrapper.style.width = `${buttonWidth}px`;\r\n\r\n\t\t\tconst select2Container = wrapper.querySelector( '.select2-container' );\r\n\t\t\tif (select2Container) {\r\n\t\t\t\tselect2Container.style.width = `${buttonWidth}px`;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Викликати один раз при завантаженні\r\n\t\tupdateWidth();\r\n\r\n\t\t// Використовуємо ResizeObserver для автоматичного оновлення\r\n\t\tconst observer = new ResizeObserver( updateWidth );\r\n\t\tobserver.observe( button );\r\n\t}\r\n} );\r\n\r\n//////////////////////select2 block div width/////////////////\r\nwindow.addEventListener( 'load', () => {\r\n\tconst wrapper = document.querySelector( '.gift_items__select' );\r\n\r\n\tif (!wrapper) return;\r\n\r\n\tconst button = wrapper.querySelector( '.shop-now' );\r\n\r\n\tif (button) {\r\n\t\tconst buttonWidth = button.offsetWidth;\r\n\t\twrapper.style.width = `${buttonWidth}px`;\r\n\t}\r\n} );\r\n\r\n\r\n//////////////////////mobile_burger_menu///////////////////////////////////\r\nconst burger = document.getElementById( 'burger' );\r\nconst mobileMenu = document.getElementById( 'mobileMenu' );\r\nconst closeMenu = document.getElementById( 'closeMenu' );\r\nconst overlay = document.getElementById( 'overlay' );\r\n\r\nfunction openMenu() {\r\n\tmobileMenu.classList.add( 'active' );\r\n\toverlay.classList.add( 'active' );\r\n\tburger.classList.add( 'open' );\r\n\tdocument.body.classList.add( 'scroll-lock' );\r\n}\r\n\r\nfunction closeMenuFunc() {\r\n\tmobileMenu.classList.remove( 'active' );\r\n\toverlay.classList.remove( 'active' );\r\n\tburger.classList.remove( 'open' );\r\n\tdocument.body.classList.remove( 'scroll-lock' );\r\n}\r\n\r\nburger.addEventListener( 'click', openMenu );\r\ncloseMenu.addEventListener( 'click', closeMenuFunc );\r\noverlay.addEventListener( 'click', closeMenuFunc );\r\n\r\n\r\n///////////////////////////сабменю для мобільної версіїї///////////////////////////////////////////////////////\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\tdocument.querySelectorAll( '.submenu-toggle' ).forEach( toggle => {\r\n\t\ttoggle.addEventListener( 'click', () => {\r\n\t\t\tconst currentLi = toggle.closest( 'li' );\r\n\t\t\tconst submenu = currentLi.querySelector( '.mobile-submenu__list' );\r\n\r\n\t\t\t// Закриваємо інші меню\r\n\t\t\tdocument.querySelectorAll( '.mobile-submenu__list.active' ).forEach( activeMenu => {\r\n\t\t\t\tif (activeMenu !== submenu) {\r\n\t\t\t\t\tactiveMenu.style.maxHeight = '0';\r\n\t\t\t\t\tactiveMenu.classList.remove( 'active' );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tdocument.querySelectorAll( '.submenu-toggle.active' ).forEach( activeToggle => {\r\n\t\t\t\tif (activeToggle !== toggle) {\r\n\t\t\t\t\tactiveToggle.classList.remove( 'active' );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Перемикаємо активність\r\n\t\t\tif (submenu) {\r\n\t\t\t\tif (submenu.classList.contains( 'active' )) {\r\n\t\t\t\t\t// Закриваємо\r\n\t\t\t\t\tsubmenu.style.maxHeight = submenu.scrollHeight + 'px'; // фіксуємо поточну\r\n\t\t\t\t\tsetTimeout( () => submenu.style.maxHeight = '0', 10 ); // потім плавно закриваємо\r\n\t\t\t\t\tsubmenu.classList.remove( 'active' );\r\n\t\t\t\t\ttoggle.classList.remove( 'active' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Відкриваємо\r\n\t\t\t\t\tsubmenu.classList.add( 'active' );\r\n\t\t\t\t\ttoggle.classList.add( 'active' );\r\n\t\t\t\t\tsubmenu.style.maxHeight = submenu.scrollHeight + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t} );\r\n} );\r\n\r\n\r\n/////////////////////////catalog_main//////////////\r\ndocument.querySelectorAll( '.filter__material' ).forEach( material => {\r\n\tconst title = material.querySelector( '.material_title' );\r\n\tconst menu = material.querySelector( '.material_menu' );\r\n\tconst arrow = material.querySelector( '.material_arrow' );\r\n\tconst h2 = title.querySelector( 'h2' );\r\n\r\n\tfunction toggleMenu( e ) {\r\n\t\te.preventDefault();\r\n\t\tmenu.classList.toggle( 'active' );\r\n\t\tarrow.classList.toggle( 'active' );\r\n\t}\r\n\r\n\t// Вішаємо події тільки на h2 і стрілку\r\n\th2.addEventListener( 'click', toggleMenu );\r\n\tarrow.addEventListener( 'click', toggleMenu );\r\n} );\r\n\r\n\r\n///////////////////////////////////NOuislider//////////////////////\r\ndocument.addEventListener( 'DOMContentLoaded', function () {\r\n\tvar priceBlocks = document.querySelectorAll( '.price-filter' );\r\n\r\n\tpriceBlocks.forEach( function ( block ) {\r\n\t\tvar sliderEl = block.querySelector( '.js-price-slider' );\r\n\t\tif (!sliderEl || typeof noUiSlider === 'undefined') return;\r\n\r\n\t\tvar rangeMin = parseInt( block.dataset.rangeMin, 10 ) || 20;\r\n\t\tvar rangeMax = parseInt( block.dataset.rangeMax, 10 ) || 1500;\r\n\r\n\t\tvar urlParams = new URLSearchParams( window.location.search );\r\n\t\tvar minParam = block.dataset.minParam;\r\n\t\tvar maxParam = block.dataset.maxParam;\r\n\r\n\t\tvar startMin = parseInt( urlParams.get( minParam ), 10 ) || parseInt( block.dataset.startMin, 10 ) || 20;\r\n\t\tvar startMax = parseInt( urlParams.get( maxParam ), 10 ) || parseInt( block.dataset.startMax, 10 ) || 1500;\r\n\r\n\t\tvar lowerEl = block.querySelector( '.js-price-lower' );\r\n\t\tvar upperEl = block.querySelector( '.js-price-upper' );\r\n\r\n\t\tnoUiSlider.create( sliderEl, {\r\n\t\t\tstart: [startMin, startMax],\r\n\t\t\tconnect: true,\r\n\t\t\trange: {min: rangeMin, max: rangeMax},\r\n\t\t\tstep: 1\r\n\t\t} );\r\n\r\n\t\tif (lowerEl) lowerEl.textContent = startMin;\r\n\t\tif (upperEl) upperEl.textContent = startMax;\r\n\r\n\t\t// Оновлюємо data-* на контейнері (щоб кнопка могла зчитати)\r\n\t\tblock.dataset.currentMin = String( startMin );\r\n\t\tblock.dataset.currentMax = String( startMax );\r\n\r\n\t\tsliderEl.noUiSlider.on( 'update', function ( values ) {\r\n\t\t\tvar minVal = Math.round( values[0] );\r\n\t\t\tvar maxVal = Math.round( values[1] );\r\n\r\n\t\t\tif (lowerEl) lowerEl.textContent = minVal;\r\n\t\t\tif (upperEl) upperEl.textContent = maxVal;\r\n\r\n\t\t\tblock.dataset.currentMin = String( minVal );\r\n\t\t\tblock.dataset.currentMax = String( maxVal );\r\n\t\t} );\r\n\t} );\r\n} );\r\n\r\n\r\n////////////////фільтри анімація//////////////////////////////////////////////////\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\tconst filters = document.querySelector( '.filters_items' );\r\n\tconst itemsBlock = document.querySelector( '.items_block' );\r\n\tconst wrapper = document.querySelector( '.filters_wrapper' );\r\n\r\n\tif (!filters || !itemsBlock || !wrapper) return;\r\n\r\n\tconst stickyOffset = 140;\r\n\tconst stopOffset = 190; // відступ знизу\r\n\tconst hysteresis = 10; // буферна зона, щоб уникнути дьоргання\r\n\r\n\tlet isStuck = false;\r\n\tlet isAtBottom = false;\r\n\r\n\tlet lastScrollY = window.scrollY;\r\n\r\n\twindow.addEventListener( 'scroll', () => {\r\n\t\tconst currentScrollY = window.scrollY;\r\n\t\tconst deltaY = Math.abs( currentScrollY - lastScrollY );\r\n\r\n\t\t// Ігноруємо дрібні прокручування менше hysteresis\r\n\t\tif (deltaY < hysteresis) return;\r\n\r\n\t\tlastScrollY = currentScrollY;\r\n\r\n\t\tconst containerTop = wrapper.getBoundingClientRect().top;\r\n\t\tconst itemsBottom = itemsBlock.getBoundingClientRect().bottom;\r\n\t\tconst filtersHeight = filters.offsetHeight;\r\n\r\n\t\t// Зупинка знизу\r\n\t\tif (!isAtBottom && itemsBottom <= filtersHeight + stopOffset) {\r\n\t\t\tisAtBottom = true;\r\n\t\t\tisStuck = false;\r\n\t\t\tfilters.style.position = 'absolute';\r\n\t\t\tfilters.style.top = 'auto';\r\n\t\t\tfilters.style.bottom = '60px';\r\n\t\t\tfilters.classList.remove( 'filters-sticky' );\r\n\t\t\tfilters.classList.add( 'filters-bottom' );\r\n\t\t}\r\n\r\n\t\t// Фіксація вгорі\r\n\t\telse if (!isStuck && containerTop <= stickyOffset && itemsBottom > filtersHeight + stopOffset + hysteresis) {\r\n\t\t\tisStuck = true;\r\n\t\t\tisAtBottom = false;\r\n\t\t\tfilters.style.position = 'fixed';\r\n\t\t\tfilters.style.top = `${stickyOffset}px`;\r\n\t\t\tfilters.style.bottom = 'auto';\r\n\t\t\tfilters.classList.add( 'filters-sticky' );\r\n\t\t\tfilters.classList.remove( 'filters-bottom' );\r\n\t\t}\r\n\r\n\t\t// Повернення в звичайний стан\r\n\t\telse if (containerTop > stickyOffset + hysteresis) {\r\n\t\t\tisStuck = false;\r\n\t\t\tisAtBottom = false;\r\n\t\t\tfilters.style.position = 'static';\r\n\t\t\tfilters.style.top = '';\r\n\t\t\tfilters.style.bottom = '';\r\n\t\t\tfilters.classList.remove( 'filters-sticky', 'filters-bottom' );\r\n\t\t}\r\n\t} );\r\n} );\r\n\r\n\r\n////////////////////////////ajax/////////////////////////////////////////////////\r\n\r\nfunction updateProducts( url ) {\r\n\tconst currentGrid = document.querySelector( '#product-grid' );\r\n\tif (!currentGrid) return;\r\n\r\n\t// Додаємо клас fade-out до всіх існуючих товарів\r\n\tconst cards = currentGrid.querySelectorAll( '.card' );\r\n\tcards.forEach( card => card.classList.add( 'fade-out' ) );\r\n\r\n\t// Трохи чекаємо на завершення анімації\r\n\tsetTimeout( () => {\r\n\t\tfetch( url )\r\n\t\t\t.then( res => res.text() )\r\n\t\t\t.then( html => {\r\n\t\t\t\tconst parser = new DOMParser();\r\n\t\t\t\tconst doc = parser.parseFromString( html, 'text/html' );\r\n\r\n\t\t\t\t// Беремо новий grid\r\n\t\t\t\tconst newGrid = doc.querySelector( '#product-grid' );\r\n\r\n\t\t\t\tif (newGrid) {\r\n\t\t\t\t\tcurrentGrid.innerHTML = newGrid.innerHTML;\r\n\r\n\t\t\t\t\t// Додаємо клас плавної появи\r\n\t\t\t\t\tconst newCards = currentGrid.querySelectorAll( '.card' );\r\n\t\t\t\t\tnewCards.forEach( card => {\r\n\t\t\t\t\t\tcard.style.opacity = 0;\r\n\t\t\t\t\t\tcard.style.transform = 'translateY(20px)';\r\n\t\t\t\t\t\tsetTimeout( () => {\r\n\t\t\t\t\t\t\tcard.style.transition = 'opacity 0.4s ease, transform 0.4s ease';\r\n\t\t\t\t\t\t\tcard.style.opacity = 1;\r\n\t\t\t\t\t\t\tcard.style.transform = 'translateY(0)';\r\n\t\t\t\t\t\t}, 50 );\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t// Оновлюємо URL та пагінацію\r\n\t\t\t\t\twindow.history.pushState( {}, '', url );\r\n\t\t\t\t\tattachPaginationListeners();\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t}, 200 ); // час fade-out\r\n}\r\n\r\nfunction attachPaginationListeners() {\r\n\tdocument.querySelectorAll( '.pagination a.page-btn' ).forEach( a => {\r\n\t\ta.addEventListener( 'click', function ( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tupdateProducts( this.href );\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\n// Ініціалізація\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\tattachPaginationListeners();\r\n} );\r\n\r\n\r\n//////////////////////////дескріпшин продукту////////////////////////\r\nconst tabs = document.querySelectorAll( '.tab' );\r\nconst contents = document.querySelectorAll( '.tab-content' );\r\n\r\ntabs.forEach( tab => {\r\n\ttab.addEventListener( 'click', () => {\r\n\t\ttabs.forEach( t => t.classList.remove( 'active' ) );\r\n\t\ttab.classList.add( 'active' );\r\n\r\n\t\tcontents.forEach( c => c.classList.remove( 'active' ) );\r\n\t\tdocument.getElementById( tab.dataset.tab ).classList.add( 'active' );\r\n\t} );\r\n} );\r\n\r\n\r\n/////////////////////////обираємо потрібнний варіант товару в продукті/////////////////////////////////////////\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\t// Всі форми продуктів на сторінці\r\n\tconst cartForms = document.querySelectorAll('form[id^=\"product-form-\"]');\r\n\r\n\tcartForms.forEach(form => {\r\n\t\t// select всередині цієї форми\r\n\t\tconst variantSelect = form.querySelector('select[name=\"id\"]');\r\n\t\t// ціна для цього продукту\r\n\t\tconst priceEl = form.closest('.product_details').querySelector('.product_details__price');\r\n\t\t// блоки опцій для цього продукту\r\n\t\tconst optionWrappers = form.closest('.product_details').querySelectorAll('.product_details__filters');\r\n\r\n\t\t// Додаємо слухачі на кнопки та select\r\n\t\toptionWrappers.forEach(wrapper => {\r\n\t\t\tconst buttons = wrapper.querySelectorAll('.button_standart.ft');\r\n\t\t\tconst selectEl = wrapper.querySelector('select.gift-select');\r\n\r\n\t\t\t// Кнопки\r\n\t\t\tif (buttons.length) {\r\n\t\t\t\tbuttons.forEach(button => {\r\n\t\t\t\t\tbutton.addEventListener('click', function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tbuttons.forEach(btn => btn.classList.remove('active'));\r\n\t\t\t\t\t\tthis.classList.add('active');\r\n\r\n\t\t\t\t\t\tif (selectEl) {\r\n\t\t\t\t\t\t\tselectEl.value = this.dataset.value;\r\n\t\t\t\t\t\t\tselectEl.dispatchEvent(new Event('change'));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tupdateVariant();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Select\r\n\t\t\tif (selectEl) {\r\n\t\t\t\tselectEl.addEventListener('change', function() {\r\n\t\t\t\t\tif (buttons.length) {\r\n\t\t\t\t\t\tbuttons.forEach(btn => {\r\n\t\t\t\t\t\t\tbtn.classList.toggle('active', btn.dataset.value === this.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdateVariant();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction updateVariant() {\r\n\t\t\tlet selectedOptions = [];\r\n\r\n\t\t\toptionWrappers.forEach(wrapper => {\r\n\t\t\t\tconst index = wrapper.dataset.optionIndex;\r\n\t\t\t\tconst activeBtn = wrapper.querySelector('.button_standart.ft.active');\r\n\t\t\t\tconst selectEl = wrapper.querySelector('select.gift-select');\r\n\r\n\t\t\t\tif (activeBtn) {\r\n\t\t\t\t\tselectedOptions[index] = activeBtn.dataset.value;\r\n\t\t\t\t} else if (selectEl) {\r\n\t\t\t\t\tselectedOptions[index] = selectEl.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// шукаємо варіант по JSON\r\n\t\t\tlet matchedVariant = Array.from(variantSelect.options).find(option => {\r\n\t\t\t\tconst variantOptions = JSON.parse(option.dataset.options);\r\n\t\t\t\treturn variantOptions.every((opt, i) => opt === selectedOptions[i]);\r\n\t\t\t});\r\n\r\n\t\t\tif (matchedVariant) {\r\n\t\t\t\tvariantSelect.value = matchedVariant.value;\r\n\t\t\t\tvariantSelect.dispatchEvent(new Event('change'));\r\n\r\n\t\t\t\tif (priceEl) {\r\n\t\t\t\t\tpriceEl.textContent = matchedVariant.dataset.price;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst newUrl = `${window.location.pathname}?variant=${matchedVariant.value}`;\r\n\t\t\t\twindow.history.replaceState(null, '', newUrl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Викликаємо при завантаженні\r\n\t\tupdateVariant();\r\n\t});\r\n});\r\n\r\n\r\n////////////////////////лічильник продуктів////////////////////////////////////////\r\ndocument.querySelectorAll('.product_details').forEach(product => {\r\n\tconst qtyControl = product.querySelector('.quantity-control');\r\n\tconst qtyValue = qtyControl.querySelector('.qty-value');\r\n\tconst form = product.querySelector('form[id^=\"product-form-\"]'); // форма цього продукту\r\n\tconst qtyInput = form.querySelector('input[name=\"quantity\"]'); // hidden всередині форми\r\n\tconst [minusBtn, plusBtn] = qtyControl.querySelectorAll('.qty-btn');\r\n\r\n\tminusBtn.addEventListener('click', () => {\r\n\t\tlet current = parseInt(qtyValue.textContent, 10);\r\n\t\tif (current > 1) current--;\r\n\t\tqtyValue.textContent = current;\r\n\t\tqtyInput.value = current;\r\n\t});\r\n\r\n\tplusBtn.addEventListener('click', () => {\r\n\t\tlet current = parseInt(qtyValue.textContent, 10);\r\n\t\tcurrent++;\r\n\t\tqtyValue.textContent = current;\r\n\t\tqtyInput.value = current;\r\n\t});\r\n});\r\n\r\n\r\n//////////////////////////////лічильник в кошику///////////////////////\r\nfunction setupCartQtyButtons() {\r\n\tconst qtyButtons = document.querySelectorAll('.quantity-control.cart .qty-btn');\r\n\r\n\tqtyButtons.forEach(btn => {\r\n\t\tbtn.addEventListener('click', async () => {\r\n\t\t\tconst key = btn.dataset.key;\r\n\t\t\tconst action = btn.dataset.action;\r\n\t\t\tconst qtyEl = btn.parentElement.querySelector('.qty-value');\r\n\t\t\tlet currentQty = parseInt(qtyEl.textContent, 10);\r\n\r\n\t\t\tlet newQty = action === 'plus' ? currentQty + 1 : currentQty - 1;\r\n\t\t\tif (newQty < 1) newQty = 1;\r\n\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('quantity', newQty);\r\n\t\t\tformData.append('id', key);\r\n\r\n\t\t\tawait fetch('/cart/change.js', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tbody: formData\r\n\t\t\t});\r\n\r\n\t\t\t// Оновлюємо корзину\r\n\t\t\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\t\t\trenderCart(cart);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/////////////////button add to cart//////////////////\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tconst cartForms = document.querySelectorAll('form[id^=\"product-form-\"]');\r\n\r\n\tcartForms.forEach(form => {\r\n\t\tform.addEventListener('submit', async e => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst variantSelect = form.querySelector('select[name=\"id\"]'); // name=\"id\" завжди правильний\r\n\t\t\tconst qtyInput = form.querySelector('input.qty-input');       // інпут саме всередині цієї форми\r\n\r\n\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append('id', variantSelect.value);\r\n\t\t\tformData.append('quantity', qtyInput.value);\r\n\r\n\t\t\t// додаємо товар у кошик\r\n\t\t\tawait fetch('/cart/add.js', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tbody: formData\r\n\t\t\t});\r\n\r\n\t\t\t// отримуємо оновлений cart\r\n\t\t\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\r\n\t\t\t// перемальовуємо корзину\r\n\t\t\trenderCart(cart);\r\n\r\n\t\t\t// відкриваємо sidebar\r\n\t\t\tdocument.getElementById('cartSidebar').classList.add('active');\r\n\t\t\tdocument.getElementById('cartOverlay').classList.add('active');\r\n\t\t});\r\n\t});\r\n});\r\n\r\n\r\n\r\n\r\n///////////////////корзина////////////////////////////////////////\r\n\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n\tconst productForms = document.querySelectorAll('[id^=\"product-form-\"]');\r\n\tconst cartSidebar = document.getElementById('cartSidebar');\r\n\tconst cartOverlay = document.getElementById('cartOverlay');\r\n\tconst cartItems = document.getElementById('cartItems');\r\n\r\n\t// 🔹 1. При завантаженні сторінки підтягнемо вже існуючу корзину\r\n\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\trenderCart(cart);\r\n\r\n\t// 🔹 2. Обробка додавання товару\r\n\tproductForms.forEach(productForm => {\r\n\t\tproductForm.addEventListener('submit', async function(e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tconst formData = new FormData(productForm);\r\n\r\n\t\t\t// додаємо товар у кошик\r\n\t\t\tawait fetch('/cart/add.js', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tbody: formData\r\n\t\t\t});\r\n\r\n\t\t\t// отримуємо оновлений cart\r\n\t\t\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\r\n\t\t\t// перемальовуємо корзину\r\n\t\t\trenderCart(cart);\r\n\r\n\t\t\t// відкриваємо sidebar\r\n\t\t\tcartSidebar.classList.add('active');\r\n\t\t\tcartOverlay.classList.add('active');\r\n\t\t});\r\n\t});\r\n\r\n\tfunction renderCart(cart) {\r\n\t\tcartItems.innerHTML = '';\r\n\r\n\t\tif (cart.items.length === 0) {\r\n\t\t\tcartItems.innerHTML = '<p>Кошик порожній</p>';\r\n\t\t\tdocument.querySelector('.subtotal__price').textContent = '0 ' + cart.currency;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcart.items.forEach(item => {\r\n\t\t\tconst card = `\r\n        <div class=\"card\" data-badge=\"new\">\r\n          <div class=\"card_image cart\">\r\n            ${item.featured_image ? `<a href=\"${item.url}\"><img src=\"${item.featured_image.url}\" alt=\"${item.title}\"></a>` : ''}\r\n          </div>\r\n          <div class=\"cart-item-info\">\r\n            <div class=\"cart-item__title\">\r\n              <h4>${item.product_title}</h4>\r\n              <button class=\"remove\" data-key=\"${item.key}\"><svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.28046 15.7849C0.987548 16.0778 0.51264 16.0778 0.219726 15.7849C-0.0731888 15.492 -0.0731888 15.0172 0.219726 14.7243L6.94271 8.0023L0.219686 1.28024C-0.0732284 0.987367 -0.0732287 0.512527 0.219686 0.219655C0.5126 -0.0732169 0.987508 -0.0732167 1.28042 0.219655L8.00345 6.94171L14.7265 0.219654C15.0194 -0.0732179 15.4943 -0.0732181 15.7872 0.219654C16.0801 0.512526 16.0801 0.987366 15.7872 1.28024L9.06419 8.0023L15.7872 14.7243C16.0801 15.0172 16.0801 15.492 15.7872 15.7849C15.4943 16.0778 15.0194 16.0778 14.7264 15.7849L8.00345 9.06288L1.28046 15.7849Z\" fill=\"black\"/>\r\n</svg></button>\r\n            </div>\r\n            <p class=\"price\">${(item.final_line_price / 100).toFixed(2)} ${cart.currency}</p>\r\n            ${item.options_with_values.map(opt => `\r\n              <div class=\"product_det\">\r\n                <p class=\"product__name\">${opt.name}:</p>\r\n                <p class=\"product__var\">${opt.value}</p>\r\n              </div>\r\n            `).join('')}\r\n            <div class=\"quantity\">\r\n              <div class=\"quantity-control cart\">\r\n                <button class=\"qty-btn\" data-action=\"minus\" data-key=\"${item.key}\">-</button>\r\n                <span class=\"qty-value\">${item.quantity}</span>\r\n                <button class=\"qty-btn\" data-action=\"plus\" data-key=\"${item.key}\">+</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n\t\t\tcartItems.insertAdjacentHTML('beforeend', card);\r\n\t\t});\r\n\r\n\t\t// subtotal\r\n\t\tdocument.querySelector('.subtotal__price').textContent =\r\n\t\t\t(cart.total_price / 100).toFixed(2) + ' ' + cart.currency;\r\n\r\n\t\t// ПІДКЛЮЧАЄМО слухачі до кнопок\r\n\t\tsetupCartQtyButtons();\r\n\t}\r\n\r\n\tfunction setupCartQtyButtons() {\r\n\t\tconst qtyButtons = document.querySelectorAll('.quantity-control.cart .qty-btn');\r\n\r\n\t\tqtyButtons.forEach(btn => {\r\n\t\t\tbtn.onclick = async () => { // використовую onclick, щоб уникнути дублювання слухачів\r\n\t\t\t\tconst key = btn.dataset.key;\r\n\t\t\t\tconst action = btn.dataset.action;\r\n\t\t\t\tconst qtyEl = btn.parentElement.querySelector('.qty-value');\r\n\t\t\t\tlet currentQty = parseInt(qtyEl.textContent, 10);\r\n\r\n\t\t\t\tlet newQty = action === 'plus' ? currentQty + 1 : currentQty - 1;\r\n\t\t\t\tif (newQty < 1) newQty = 1;\r\n\r\n\t\t\t\tconst formData = new FormData();\r\n\t\t\t\tformData.append('quantity', newQty);\r\n\t\t\t\tformData.append('id', key);\r\n\r\n\t\t\t\tawait fetch('/cart/change.js', {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tbody: formData\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\t\t\t\trenderCart(cart);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n});\r\n\r\n\r\n//\r\n\r\n\r\n\r\n////////fetch///////\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tconst clearBtn = document.querySelector('.button_standart.fetch');\r\n\tconst cartItems = document.getElementById('cartItems');\r\n\r\n\tif (clearBtn) {\r\n\t\tclearBtn.addEventListener('click', async () => {\r\n\t\t\t// очищаємо корзину\r\n\t\t\tawait fetch('/cart/clear.js', { method: 'POST' });\r\n\r\n\t\t\t// отримуємо оновлений cart\r\n\t\t\tconst cart = await fetch('/cart.js').then(res => res.json());\r\n\r\n\t\t\t// перемальовуємо\r\n\t\t\trenderCart(cart);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction renderCart(cart) {\r\n\t\tcartItems.innerHTML = '';\r\n\r\n\t\tif (cart.items.length === 0) {\r\n\t\t\tcartItems.innerHTML = '<p>Кошик порожній</p>';\r\n\t\t} else {\r\n\t\t\tcart.items.forEach(item => {\r\n\t\t\t\tconst card = `\r\n          <div class=\"card\">\r\n            <div class=\"cart-item-info\">\r\n              <h4>${item.product_title}</h4>\r\n              <p>${item.quantity} x ${(item.final_line_price / 100).toFixed(2)} ${cart.currency}</p>\r\n            </div>\r\n          </div>\r\n        `;\r\n\t\t\t\tcartItems.insertAdjacentHTML('beforeend', card);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tdocument.querySelector('.subtotal__price').textContent =\r\n\t\t\t(cart.total_price / 100).toFixed(2) + ' ' + cart.currency;\r\n\t}\r\n});\r\n\r\n\r\n\r\n\r\n\r\n/////////////////////////////відкриття попап cart///////////////////////////////\r\nconst cartBtn = document.getElementById('cartBtn');\r\nconst cartImg = document.getElementById('cartImg');\r\nconst cartImgMob = document.getElementById('cartImgMob');\r\nconst cartSidebar = document.getElementById('cartSidebar');\r\nconst cartClose = document.getElementById('cartClose');\r\nconst cartOverlay = document.getElementById('cartOverlay');\r\n\r\nfunction openCart() {\r\n\tcartSidebar.classList.add('active');\r\n\tcartOverlay.classList.add('active');\r\n\tdocument.body.classList.add('scroll-lock');\r\n}\r\n\r\nfunction closeCartFunc() {\r\n\tcartSidebar.classList.remove('active');\r\n\tcartOverlay.classList.remove('active');\r\n\tdocument.body.classList.remove('scroll-lock');\r\n}\r\n\r\ncartBtn.addEventListener('click', openCart);\r\ncartImg.addEventListener('click', openCart);\r\ncartImgMob.addEventListener('click', openCart);\r\ncartClose.addEventListener('click', closeCartFunc);\r\ncartOverlay.addEventListener('click', closeCartFunc);\r\n\r\n\r\n\r\n//////////чекаут кнопк//////////\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tconst checkoutContainer = document.getElementById('checkout');\r\n\r\n\tif (checkoutContainer) {\r\n\t\tconst checkoutBtn = checkoutContainer.querySelector('button');\r\n\t\tif (checkoutBtn) {\r\n\t\t\tcheckoutBtn.addEventListener('click', () => {\r\n\t\t\t\t// Переходимо на сторінку оформлення замовлення\r\n\t\t\t\twindow.location.href = '/checkout';\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n"],"mappings":"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","ignoreList":[]}